
\chapter{Running \Simol in 5 minutes}


Since you are reading this documentation, we might assume that you have already downloaded the sources of \Simol. If it is not the case, please refer to chapter \ref{chap:download} to see how you can get them. In the sequel, we suppose that the full path to the source directory of \Simol is stored in an environment variable named \texttt{SIMOL\_ROOT}. You can define this variable by typing 
\begin{minted}{bash}
    export SIMOL_ROOT=/full/path/to/the/source/directory/of/simol
\end{minted}
in your terminal, where \texttt{/path/to/the/source/directory/of/simol} stands for the full path to the repository which contains the source directory of \Simol. For example, if this repository is \texttt{/home/simol}, you will have to type
\begin{minted}{bash}
    export SIMOL_ROOT=/home/simol
\end{minted}
in your terminal. Now, change the directory to \texttt{\$SIMOL\_ROOT/build} and run the configuration step:
\begin{minted}{bash}
    cd $SIMOL_ROOT/build
    cmake -C ../cmake/config/config.cmake -D CMAKE_INSTALL_PREFIX=$SIMOL_INSTALL_DIR ..
\end{minted}
If you want to modify the configuration parameters, or if you encounter any problem during the configuration step, pleaser refer to chapter \ref{chap:configure}. Now, just type
\begin{minted}{bash}
    make && make install
\end{minted}
to build and install \Simol. Note that the build step may last a long time because third-party libraries are automatically downloaded and installed in \texttt{\$SIMOL\_ROOT/download}. 

\chapter{Downloading \Simol}\label{chap:download}


\section{Having an account on \SourceSup}

Sources of \Simol are stored on a software forge called \SourceSup, which you can connect to at \urlSourceSup.  

The sources of \Simol can only be accessed through the SSH protocol. To be able to use this protocol, you need to have a private key and a public key. These keys are usually located at \url{~/.ssh} in your machine. If you have already defined a key called \textit{mykey}, you should see the two files \url{mykey} and \url{mykey.pub} in this directory. The former is private and should never be communicated to anyone else. The latter is public and must be uploaded on \SourceSup. 

If you do not have any SSH pair of keys, you need to create one. To do it, just type
\begin{minted}{bash}
ssh keygen -t dsa
\end{minted}
in a terminal.

\section{Installing \Git}


\Git is a popular version control system which has been written by Linus Thorvald, the creator of \Linux. The best way to learn more about \Git is to visit its official website: \urlGit. Please refer to the official documentation to find the installation steps for you own machine. In most cases, the easiest way to install it is to use a package manager like \texttt{apt-get}, \texttt{yum}, \texttt{homebrew}, etc. For example, you can install \Git on Ubuntu systems by simply typing
\begin{minted}{bash}
sudo apt-get install git
\end{minted}
in a terminal. You can check that \Git is installed on your machine with the command
\begin{minted}{bash}
git --version
\end{minted}
which should return something like this:
\begin{minted}{bash}
git version 1.7.9.5
\end{minted}

\section{Cloning \Simol repository}

To clone the source repository of \Simol, you need to be located in the directory where you want to store the development version of the software. Then, you have to type
\begin{minted}{bash}
git clone git+ssh://git@git.renater.fr:2222/simol.git
\end{minted}
in a terminal. This will create a directory \url{simol} and copy the sources of \Simol in it. 

\paragraph{Note:}
it is possible to change the name of the cloning directory, say \textit{foo}, by typing 
\begin{minted}{bash}
git clone git+ssh://git@git.renater.fr:2222/simol.git foo
\end{minted}




\chapter{Configuring \Simol}\label{chap:configure}


\section{Installing \CMake}

\section{Customizing configuration}

\section{Running configuration}

Sources of \Simol have to be built in a subdirectory called \url{build}. To reach it, just type
\begin{minted}{bash}
cd simol/build
\end{minted}
in a terminal. The configuration step lays on a configuration file. We provide an example of such a configuration file which should be copied in the root directory of \Simol :
\begin{minted}{bash}
cp ../cmake/config/config.cmake ..
\end{minted}
Please edit the copied file according to your environment. Especially, don't forget to set the variable \texttt{GCC\_ROOT} to the root of your own installation of \texttt{gcc}. Once you have edited the configuration file, all is ready to perform the configuration of \Simol by typing:
\begin{minted}{bash}
cmake -C ../config.cmake ..
\end{minted}


\chapter{Building \Simol}

\section{Setting your proxy}

If you do not use any proxy to connect the internet, you can skip this step. If you try to download and install the development version of \Simol behind a proxy, you have to define the environment variables named \texttt{http\_proxy} and \texttt{https\_proxy}. These variables are required to download external libraries of \Simol. For example, let us assume that your proxy identifier is \texttt{proxy.enpc.fr} with port 3128. To define \texttt{http\_proxy}, you need to type the following line in your terminal:

\begin{minted}{bash}
    export http_proxy=http://proxy.enpc.fr:3128
    export https_proxy=https://proxy.enpc.fr:3128
\end{minted}

Note that the scope of these variables is limited to the current terminal. If you want them to be defined each time you open a new terminal, you need to add theses lines at the end of your \url{~/.bashrc} file.

\subsection{Building}

The building step of \Simol is very simple: just type
\begin{minted}{bash}
make
\end{minted}
Note that it is not necessary to add the "-j" flag to parallelize the building step. It is done automatically. 


\chapter{Getting started}


\section{Prerequisites}

The sources of \Simol are stored on a server of the \SourceSup forge. To be able to get them, you will need to fulfill the following requirements:
\begin{itemize}
\item \textit{having a HTTP/HTTPS access to the web} to be able to get the sources and let \Simol download and install all needed external libraries for you; 
\item \textit{having an account on \SourceSup}, where the sources of \Simol are stored;
\item \Git must be installed on your machine,
\item you must have an account on \SourceSup,
\item you must be able to access the server of \SourceSup with the SSH protocol,
\item you must be a member of the \Simol development team.
\end{itemize}
This section explains how to satisfy these conditions.




\section{Installation of \Simol}









\subsection{Netbeans (8.0.2)}

You may want to use an integrated development environment (IDE) to contribute to \Simol. Many IDEs are available but only a few are able to handle a configuration script from \CMake. \Netbeans is one of them. To link \Netbeans with \Simol, please follow these steps:
\begin{enumerate}
\item run \Netbeans
\item if a project is already open, choose \textit{Close all projects} in \textit{File} menu
\item in \textit{File} menu, choose \textit{New project} and then choose \textit{C/C++ project with existing sources}
\item specify the directory containing \Simol sources and choose \textit{Custom} as the configuration mode
\item choose \textit{Run configure script in subfolder} and modify \textit{Configure arguments} by specifiying your own C/C++/Fortran compilers and enabling automatic downloading of third-party libraries. The result should look like mine:
\begin{minted}{bash}
-G "Unix Makefiles" 
-DCMAKE_BUILD_TYPE=Debug 
-DCMAKE_C_COMPILER=/usr/local/bibliotheques/gcc/4.9.2/bin/gcc 
-DCMAKE_CXX_COMPILER=/usr/local/bibliotheques/gcc/4.9.2/bin/g++ 
-DCMAKE_Fortran_COMPILER=/usr/local/bibliotheques/gcc/4.9.2/bin/gfortran 
-DENABLE_DOWNLOAD=True 
-DCMAKE_C_FLAGS_DEBUG="-g3 -gdwarf-2" 
-DCMAKE_CXX_FLAGS_DEBUG="-g3 -gdwarf-2" 
-DCMAKE_EXPORT_COMPILE_COMMANDS=ON
\end{minted}
\item skip other steps until the end of the creation of the project
\end{enumerate}



\section{Compilers}

\subsection{GCC 4.9.3}

The GNU Compilation Collection (GCC) is the preferred set of compilers for Simol. If needed, we recommend to install the 4.9.3 version of this collection. There are two reasons for this:
\begin{itemize}
\item this version supports C++11 features,
\item strings are not defined the same starting from version 5 and it causes many compilation problems which we have not solved yet.
\end{itemize}
However, any version number between 4.8.1 and 4.9.3 fulfills these conditions. For example, if the number version returned by the command line
\begin{minted}{bash}
g++ --version
\end{minted}
is at least 4.8.1, you do not need to install any other version of GCC and you can skip this step. Especially, even if the version number is 5.1.0 or higher, it would be possible to compile and link simol files without any problems (not tested). The sequel is only useful if you need to install GCC 4.9.3 manually. 

The installation of GCC 4.9.3 is quite simple. We describe here how it may be installed from sources. Alternative approaches are possible, especially those based on a package manager. However, package managers differ significatively from an operating system to another, as well as cross-plateform tools. That is the reason why we do not plan to give any support for them here. Please refer to the documentation of your favorite tool if you do not want to install GCC from sources, but from a package manager. To install GCC 4.9.3 from sources, please download the source from a mirror site on the official website 
\begin{center}
	\url{https://gcc.gnu.org/gcc-4.9}
\end{center}
For example, you can download and exract the sources thanks to the following command lines:
\begin{minted}{bash}
	wget ftp://ftp.uvsq.fr/pub/gcc/releases/gcc-4.9.3/gcc-4.9.3.tar.gz
	tar xf gcc-4.9.3.tar.gz
\end{minted}
It will create a directory named gcc-4.9.3. Then, change to this directory and download prerequisites:
\begin{minted}{bash}
	cd gcc-4.9.3
	./contrib/download_prerequisites
\end{minted}
It will take some time to achieve the downloading process. Once it is done, source must be built outside of the source directory. Let $GCC\_ROOT$ be the directory where you want to install GCC 4.9.3. For example, you can define it like this:
\begin{minted}{bash}
	export GCC_ROOT=/home/yourlogin/gcc/4.9.3
\end{minted}
where \textit{youlogin} stands for your own login. The installation process is defined by these steps:
\begin{minted}{bash}
	cd ..
	mkdir build-gcc-4.9.3
	cd gcc-4.9.3
	../gcc-4.9.3/configure --prefix=$GCC_ROOT --enable-languages=c,c++,fortran --disable-multilib
	make -j 4
	make install
\end{minted}




\subsection{Other compilers}

We do not provide any support for other compilers for the moment.
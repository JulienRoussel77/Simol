\documentclass[12pt]{book}
\usepackage{listings}
\usepackage{xspace}
\usepackage{url}
\usepackage{geometry}

\title{Simol developer's guide}
\author{C\'edric DOUCET}
\date{\today}

\newcommand{\CMake}{\texttt{CMake}\xspace} 
\newcommand{\CMakeLists}{\texttt{CMakeLists}\xspace} 
\newcommand{\Git}{\texttt{Git}\xspace} 
\newcommand{\Make}{\texttt{Make}\xspace}
\newcommand{\Simol}{\texttt{Simol}\xspace} 
\newcommand{\SourceSup}{\texttt{SourceSup}\xspace} 
\newcommand{\urlSourceSup}{https://sourcesup.renater.fr}


\geometry{left=15mm, right=15mm}

\sloppy

\begin{document}

\maketitle
\tableofcontents



\chapter{Getting started}

\section{Obtaining the sources}


\subsection{Proxy issues}

If you do not use any proxy to connect the internet, you can skip this step. If you try to download and install the development version of \Simol behind a proxy, you have to define the environment variables named \texttt{http\_proxy} and \texttt{https\_proxy}. For example, let us assume that your proxy identifier is \texttt{proxy.enpc.fr} with port 3128. To define \texttt{http\_proxy}, you need to type the following line in your terminal:
\lstset{language=bash} 
\begin{lstlisting}
export http_proxy=http://proxy.enpc.fr:3128
\end{lstlisting}
You need to do the same for the \texttt{https\_proxy} variable:
\lstset{language=bash} 
\begin{lstlisting}
export https_proxy=https://proxy.enpc.fr:3128
\end{lstlisting}
Note the scope of these variables is limited to the current terminal. If you want these variables to be defined each time you open a new terminal, you need to add the follwing lines at the end of your \url{~/.bashrc} file:
\lstset{language=bash} 
\begin{lstlisting}
export http_proxy=http://proxy.enpc.fr:3128
export https_proxy=https://proxy.enpc.fr:3128
\end{lstlisting}

\subsection{Installing \Git}

To be able to download the development version of \Simol, you need to have \Git installed on your machine. \Git is usually available as a package on Unix systems. For example, to install \Git on Ubuntu 12.04, you just have to type
\lstset{language=bash} 
\begin{lstlisting}
sudo apt-get install git
\end{lstlisting}
in a terminal. 

\subsection{Creation of an account on \SourceSup}

Sources of \Simol are stored on a software forge called \SourceSup, which you can connect to at \urlSourceSup.  

The sources of \Simol can only be accessed through the SSH protocol. To be able to use this protocol, you need to have a private key and a public key. These keys are usually located at \url{~/.ssh} in your machine. If you have already defined a key called \textit{mykey}, you should see the two files \url{mykey} and \url{mykey.pub} in this directory. The former is private and should never be communicated to anyone else. The latter is public and must be uploaded on \SourceSup. 

If you do not have any SSH pair of keys, you need to create one. To do it, just type
\lstset{language=bash} 
\begin{lstlisting}
ssh keygen -t dsa
\end{lstlisting}
in a terminal.


\subsection{Cloning the source repository}

To clone the source repository of \Simol, you need to be located in the directory where you want to store the development version of the software. Then, you have to type
\lstset{language=bash} 
\begin{lstlisting}
git clone git+ssh://git@git.renater.fr:2222/simol.git
\end{lstlisting}
in a terminal. This will create a directory \url{simol} and copy the sources of \Simol in it. 

\paragraph{Note:}
it is possible to change the name of the cloning directory, say \text{foo}, by typing 
\lstset{language=bash} 
\begin{lstlisting}
git clone git+ssh://git@git.renater.fr:2222/simol.git foo
\end{lstlisting}
In this documentation, we always assume that the default name \textit{simol} has been keeped.

\section{Installing \Simol}



\subsection{Configuration}

Sources of \Simol are built in a subdirectory called \url{build}. To reach it, just type
\lstset{language=bash} 
\begin{lstlisting}
cd simol/build
\end{lstlisting}
in a terminal. Then, the installation of \Simol is very simple:
\lstset{language=bash} 
\begin{lstlisting}
cmake ..
make
make install
\end{lstlisting}

\subsection{Build}


\section{Running first examples}

\subsection{Molecular dynamics}

\subsection{Quantum chemistry}


\chapter{Development environment}

\section{File organization}
\section{Build system}

\subsection{Why \CMake?}

The build system of \Simol is \CMake, which is very similar to \Make. A typical installation of a software with \CMake consists in running the three following commands from a subdirectory usually called \url{build}: 
\lstset{language=bash} 
\begin{lstlisting}
cmake src && make && make install
\end{lstlisting}
If you have already installed a software with \Make, you probably noticed the similarity with the classical combo:
\lstset{language=bash} 
\begin{lstlisting}
src/configure && make && make install
\end{lstlisting}
The only difference between \Make and \CMake is the first command, which corresponds to the configuration step. This is one of the reason why \CMake has been chosen to automatize the installation of \Simol. The second reason is that \CMake is a cross-platform build system. Contrary to \Make, which is only available on Unix systems, \CMake can be used on Windows systems too.

\subsection{How does it work?}

\CMake relies on a hierarchy of configuration files named \CMakeLists. The main configuration file must be located at the top directory of the project.



\section{Coding rules}
\section{Unit tests}
\section{Continuous integration}
\section{Documentation}


\end{document}